<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Category: Toxic | Tox Development blog</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Perils of Tox development">
<meta property="og:type" content="website">
<meta property="og:title" content="Tox Development blog">
<meta property="og:url" content="https://blog.tox.im/categories/Toxic/">
<meta property="og:site_name" content="Tox Development blog">
<meta property="og:description" content="Perils of Tox development">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tox Development blog">
<meta name="twitter:description" content="Perils of Tox development">

  
    <link rel="alternative" href="/atom.xml" title="Tox Development blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<h1 class="blog-title">
		<a href="/">Tox Development blog</a>
	</h1>
	<nav class="nav">
		<ul>
			<li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:https://blog.tox.im"></form>
	</div>
</header>
    <div id="main">
      
  
    <article id="post-toxic-release-v-0-5-2-and-groupchat-issues" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2014/10/03/toxic-release-v-0-5-2-and-groupchat-issues/" class="article-date">
  <time datetime="2014-10-03T05:49:23.000Z" itemprop="datePublished">Oct 3 2014</time>
</a>
		</span>
		<span class="meta-elements author">Tox Foundation</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2014/10/03/toxic-release-v-0-5-2-and-groupchat-issues/">Toxic release v.0.5.2 (and groupchat issues)</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Major changes include:</p>
<ul>
<li>Ability to set an avatar. You can set it in the config file (see the <a href="https://github.com/Tox/toxic/blob/master/misc/toxic.conf.example" target="_blank" rel="external">example config file</a>) or with the command ‘/avatar &lt;path&gt;’ (Note: This command will only set it temporarily until you restart your client).</li>
<li>Previous chat history is now loaded when you open a chat window.</li>
<li>Chat log files are now renamed when a contact changes their name instead of creating a new log file and leaving the old one.</li>
<li>Resolved a performance issue where idle CPU usage was unacceptably high when compiled with sound notifications.</li>
<li>Some small UI changes that need no explanation.</li>
<li>Lots of important bug fixes<br>The currently ongoing toxcore groupchat rewrite broke Toxic’s implementation of groupchats. Any version of Toxic older than <strong>c56c6cc2</strong> will behave very strangely with the new groupchats (this may be temporary).</li>
</ul>
<p>Also, as of writing this GroupBot is up to date with the latest core, so if you can’t get an invite from him then you need to update your toxcore.</p>
<p>tldr; update everything</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
  <div class="article-category">
    <a class="article-category-link" href="/categories/Toxic/">Toxic</a>
  </div>

			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-build-systems-yo" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2014/03/17/build-systems-yo/" class="article-date">
  <time datetime="2014-03-17T05:19:32.000Z" itemprop="datePublished">Mar 17 2014</time>
</a>
		</span>
		<span class="meta-elements author">Tox Foundation</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2014/03/17/build-systems-yo/">The joys of build systems, and the future of Toxic</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>In a time long ago Tox used cmake.</p>
<p>Cmake was first purely because it matched our goals, sort of. It provided a nice run everywhere interface that the average person who compiled the then build only Tox could use without issues. Cmake wasn’t all golden though, maintaining it was a sea of unneeded complexities and overkill, too much for the average developer to deal with for the size of Tox. While this wasn’t a major issue, one developer took it on himself to switch to autotools, with the promise that he’d maintain it.</p>
<p> Toxic starts to look all pretty</p>
<p>Our first client, the API test, was nTox. Not long after, Toxic followed. Toxic was pretty client in core, composed of a couple files and real ui, development on it skyrocketed. It wasn’t long till Toxic was a fully featured client, almost like the shiny new GUI clients in development. I had a crazy idea that ended up perfect with the timing, moving Toxic from a part of core to its own repo, Tox/toxic. When this happened, autotools were inherited over, as they were an accepted part of core.</p>
<p>That’s cool, what about the future of Toxic?</p>
<p>And now, the fun part. A couple days ago IRIXuser and myself were talking about the GSoC project on a replacement build system, we wanted something smooth and easy, without unneeded complexities. (We’re a dozen files and headers, after all.) We stumbled upon <a href="http://hypertriton.com/bsdbuild/" title="BSDBuild" target="_blank" rel="external">BSDBuild</a>, a simple build system based off 4.4BSD make libraries. A bit of look in to it and we discovered that it was easy. Like <em>very easy</em>. The entire system for end users was a configure that someone editing it generated and a Makefile made by hand. This was something our iOS developer could understand without a learning curve, with a quick glance.</p>
<p>4.4BSD? iOS? But I use Linux!</p>
<p>Before I go any further, I’ll take a moment to explain how the existing build system works, what users see, and how BSDBuild works. GNU autotools is composed of about 7 separate binaries and 8 files, though for this I’ll focus on just the ones Toxic used. To compile Toxic, the entire set of autotools binaries is required, along with a GNU make. A user installs all of these and runs autoreconf -i to generate configure. This process takes around 13 seconds. Afterwards the user runs the configure, making the compiled Makefile in the process. This process takes about 12 seconds. Afterwards the user runs make and make install, building the program. BSDBuild is based off 4.4BSD make libraries, built around a standard POSIX bourne shell and makefile. The developers provide the configure and Makefile, who are interpreted, and not system specific. To compile BSDBuild Toxic, a user installs zero extra files, as the configure is provided. a user runs the configure we provide, generating a Makefile.config. This process takes around 4 seconds. Afterwards the user uses make to compile and install like normal.</p>
<p>What could be so wrong with GNU autotools?</p>
<p>The design of autotools is an over complex one, composed of m4, marcos, and dozens of files and commands. This results in a slow and bloated install process for users, along with something that even developers who have been using it <em>for decades </em><a href="http://esr.ibiblio.org/?p=1877" title="still run in to undefined behavior." target="_blank" rel="external">still run in to undefined behavior</a>. The result of this means that things like —disable-av being <a href="https://github.com/Tox/toxic/pull/100" target="_blank" rel="external">broken</a> go unnoticed, without support for things like —enable-debug (A BSDBuild specific flag we implemented with ease). From an end user perspective, this means a configure process that takes 9 times longer and lacks features, requiring more software installed.</p>
<p>But BSDBuild couldn’t be perfect, I mean you <strong>did</strong> drop cmake!</p>
<p>One of the major issues with BSDBuild is that support for checks (REQUIRE(toxcore) can’t be done without making them first. Thankfully, the design of the pm file used for a check is so simple, we had toxcore, toxav, sodium, and openal done in half an hour. Since configure is provided by us, this means no extra work for the end user. Now, BSDBuild does have some other side effects, developers editing either configure.in or Makefile (The entire BSDBuild) do need to have BSDBuild installed, in order to run the mkconfigure command.</p>
<p>BSDBuild doesn’t work on GNU/HURD, right?</p>
<p>Wrong! Something to consider is that while BSD Makefiles run on GNU make, GNU Makefiles may not run on BSD make. While GNU autotools produce GNU Makefiles, the POSIX compliant BSDBuild files are more supported on more platforms than the autotools equivalent, going as far as supporting making Visual Studio and DOS Watcom projects, despite Toxic not running on Windows.</p>
<p>Reactions</p>
<p>Reactions to BSDBuild have been mixed, while the autotools maintainer has made some rather ignorant remarks about the compile process with BSDBuild, stating that perl is required (It is not), we do forgive him, BSDBuild isn’t a well known system. A few people have stated that the work was a bit of a waste of time, autotools is working. We disagree with this ideology, something like this might seem trivial in the short term, though the ease of use will aide future Toxic developers and helping them focus on the code, and not the build system.</p>
<p>The last group of people have been supportive, these have generally been users of more popular and more exotic systems, from praising the easy debugging, to the following:</p>
<blockquote>
<p>&lt;rhaps0dy&gt; so, uhm</p>
<p>&lt;rhaps0dy&gt; where do I get the BSDBuild version of libtoxcore?</p>
<p>&lt;LordAro&gt; rhaps0dy: there isn’t one</p>
<p>&lt;LordAro&gt; only toxic has a bsdbuild build system so far</p>
<p>&lt;LordAro&gt; and that’s not in master until people can be convinced that it’s “a good thing” (tm)</p>
<p>&lt;rhaps0dy&gt; :/</p>
<p>&lt;LordAro&gt; (which it is)</p>
<p>&lt;rhaps0dy&gt; I agree lol</p>
</blockquote>
<p>Why isn’t this in master yet?</p>
<p>With a couple of the reactions coming from other developers who I do like, I would greatly like them to try the system out, explore it a bit, get some honest feedback. As of now, this has not happened, though I do try to push them whenever I can. As well, being new, the new build system may have a couple of quirks that we would really like to get out first. When the time comes I’ll merge the branch in to master, just not right now.</p>
<p>I encourage you to try it now, tell me what works, what doesn’t work, and most of all, your thoughts on this pending switch.</p>
<p>Testing it is easy, just do a new clone of Toxic, specifying the bsdmake branch: <code>git clone https://github.com/Tox/toxic -b bsdmake</code></p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
  <div class="article-category">
    <a class="article-category-link" href="/categories/Toxic/">Toxic</a>
  </div>

			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-toxic-and-threads" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2014/03/13/toxic-and-threads/" class="article-date">
  <time datetime="2014-03-13T18:38:36.000Z" itemprop="datePublished">Mar 13 2014</time>
</a>
		</span>
		<span class="meta-elements author">Tox Foundation</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2014/03/13/toxic-and-threads/">Toxic and Threads</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Everybody’s favorite CLI client now utilizes threads for both Audio and the separation of Curses and Tox. This means that file transfers will be quicker, CPU usages should go down (after some optimizations), and everything should run smoother.</p>
<p>Before, Curses and Tox were refreshed on every cycle, which was a bit too much for curses. Drawing to the screen takes quite a bit of time, and doesn’t need to happen as often as possible.</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
  <div class="article-category">
    <a class="article-category-link" href="/categories/Toxic/">Toxic</a>
  </div>

			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
    <article id="post-audio" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2014/03/11/audio/" class="article-date">
  <time datetime="2014-03-11T18:55:02.000Z" itemprop="datePublished">Mar 11 2014</time>
</a>
		</span>
		<span class="meta-elements author">Tox Foundation</span>
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 itemprop="name" class="entry-title">
      <a class="article-title" href="/2014/03/11/audio/">Audio Calling Implemented in Toxic</a>
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>Last night, a non-gui client was given audio support: Toxic!</p>
<p>What does this mean? Well for starters toxic is the CLI client, meaning it’s all done in console, so not that many people will be using it. That said, it’s the first real implementation of the audio/video features worked on by mannol and Martijnvdc, with mannol putting audio functionality inside of Toxic as well.</p>
<p>It took a while for one client to do it, but after this we expect more clients to add support, with an example to go off of. Be warned though, Toxic is buggy right now, and is subject to crashing. This goes along with a daily reminder that Tox is still pre-alpha, but making strides!</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
  <div class="article-category">
    <a class="article-category-link" href="/categories/Toxic/">Toxic</a>
  </div>

			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
</article>


	<hr class="article-devider">




  
  

    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:blog.tox.im">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">Tox Development blog</a>
	</h1>
	<span class="copyright">
		&copy; 2015 Tox Foundation<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>